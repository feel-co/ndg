[{"id":"1","title":"Search","content":"Search NDG includes a built-in search system that indexes your documentation pages and their headings, enabling quick navigation through your content. Search is optional and can be configured to control indexing depth and behavior. Configuration Search behavior is configured through the section in your file or via CLI flags. Or using CLI overrides: Options Option Type Default Description boolean Enable search functionality integer Maximum heading level to index (1-6, H1 to H6) Search Behavior Hierarchical Results Search results are displayed hierarchically with pages as parent items and matching headings as nested children beneath them: This structure helps you navigate directly to relevant sections within pages rather than just finding pages. Scoring Algorithm Search uses a two-pass scoring system: Page scoring - Pages are scored based on title and content matches Anchor scoring - Headings within high-scoring pages are scored based on heading text Only headings from pages with sufficient relevance to the search query are shown, preventing irrelevant section matches from cluttering results. Tokenization Search queries and content are tokenized (split into words) for matching: Case-insensitive matching Partial word matches supported Special characters are normalized Stop words (common words like \"the\", \"a\") are preserved Example: Query: matches: \"Configuration Files\" \" file format\" \"Loading configuration from files\" Performance Considerations Index Size Search index size increases with: Number of documentation pages Amount of text content per page setting (higher = more headings indexed)","path":"SEARCH.html","tokens":["this","hierarchically","quick","configuration","description","structure","through","can","boolean","control","index","algorithm","with","headings","enabling","built-in","default","special","using","considerations","number","hierarchical","documentation","tokenized","that","level","words","files","matching","queries","cluttering","flags","case-insensitive","displayed","functionality","more","word","from","items","are","into","for","loading","ndg","via","content","section","parent","title","preventing","per","text","their","option","optional","heading","based","performance","finding","normalized","relevant","them","navigation","directly","common","and","format","search","two-pass","depth","integer","type","nested","sections","matches","only","maximum","system","sufficient","split","characters","rather","uses","higher","example","navigate","scoring","beneath","cli","1-6","helps","page","indexed","query","configured","you","irrelevant","size","pages","high-scoring","enable","results","behavior","your","indexes","options","like","preserved","scored","increases","file","children","anchor","overrides","than","supported","partial","stop","setting","includes","tokenization","relevance","shown","within","amount","just","indexing","the"],"title_tokens":["search"],"anchors":[{"text":"Search","id":"search","level":1,"tokens":["search"]},{"text":"Configuration","id":"configuration","level":2,"tokens":["configuration"]},{"text":"Options","id":"options","level":2,"tokens":["options"]},{"text":"Search Behavior","id":"search-behavior","level":2,"tokens":["behavior","search"]},{"text":"Hierarchical Results","id":"hierarchical-results","level":3,"tokens":["hierarchical","results"]},{"text":"Scoring Algorithm","id":"scoring-algorithm","level":3,"tokens":["scoring","algorithm"]},{"text":"Tokenization","id":"tokenization","level":3,"tokens":["tokenization"]},{"text":"Performance Considerations","id":"performance-considerations","level":2,"tokens":["considerations","performance"]},{"text":"Index Size","id":"index-size","level":3,"tokens":["size","index"]}]},{"id":"2","title":"Postprocessing","content":"Postprocessing NDG supports postprocessing of generated HTML, CSS, and JavaScript files to optimize output size and performance. Postprocessing is optional and disabled by default, however, testing and bug reports are welcome :) Configuration Postprocessing behaviour of NDG is configured either through the section in , or via CLI flags. To configure it in your : Or, alternatively, by using CLI overrides: Options Top-Level Options Option Type Default Description boolean Enable HTML minification boolean Enable CSS minification boolean Enable JavaScript minification HTML Options Option Type Default Description boolean Remove HTML comments from output Minification NDG supports minification of HTML, CSS and Javascript files for smaller production documents at the cost of a tiny increase in generation time. In most cases the cost is negligible, and the decrease of the document size is well worth the penalty. However, this feature is completely optional. If you are deploying your documentation to production, and if bandwidth and file size matters you will almost certainly want to enable minification. This is a low-risk, high-reward feature that will likely yield faster page loads. You will, however, want to disable minification if you are developing locally and need readable source files. Additionally, you may wish to avoid minification if you are aiming for the absolutely fastest document generation. HTML Minification Uses for fast, spec-compliant HTML minification. While enabled, NDG: Removes unnecessary whitespace while preserving content Respects whitespace-sensitive elements ( , , etc.) Removes HTML comments (configurable) Removes optional closing tags where safe Collapses boolean attributes For example, for a given config: and the input: You will receive the following output: CSS Minification We use the crate pulled by the crate for production-grade CSS minification with parsing and optimization. This primarily affects large stylesheets, such as the ones provided by the default NDG template. While enabled, NDG: Removes unnecessary whitespace and comments Optimizes color values ( -> ) Merges duplicate rules Removes unused prefixes Validates CSS syntax during processing For example, for a given config: and the input: You will receive the following output: JavaScript Minification We rely on the relatively new, but battle-tested crate for production-grade JavaScript minification with comprehensive optimizations and dead code elimination. Besides speed, it boasts 100% correctness. While enabled, NDG: Removes whitespace and comments Folds constants ( -> ) Eliminates dead code (removes unused functions) Optimizes expressions (comma operators, etc.) Validates syntax during processing For example, for a given config: and the input: You will receive the following output: Complete Example Performance Impact Postprocessing adds overhead to the build process but reduces output size: File Type Typical Reduction Build Time Impact HTML 10-20% Minimal CSS 20-40% Low JavaScript 15-30% Low For most documentation sites, the build time impact is negligible (< 1 second for typical projects). Error Handling If minification fails (e.g., invalid CSS or JavaScript syntax), NDG will report the error and stop the build. This helps catch syntax errors early: To debug minification errors: Disable minification for the failing file type Fix the syntax error Re-enable minification Extensibility The postprocessing pipeline is quite new, but it is designed to be very extensible. Each file type has detailed processor function with its own configuration options. This design is obviously not for fun, as future postprocessing capabilities are planned. Though, do not expect anything crazy. I find postprocessing to be a little hacky, and it is only a last resort after actual feature implementations.","path":"POSTPROCESSING.html","tokens":["aiming","stylesheets","will","validates","while","primarily","template","comma","10-20","documents","values","merges","flags","correctness","actual","optimizations","you","hacky","readable","output","relatively","likely","preserving","configurable","developing","collapses","attributes","early","boolean","remove","optimizes","syntax","error","enabled","design","pipeline","the","this","document","unnecessary","optimization","through","safe","welcome","report","very","reduces","rules","enable","has","testing","size","html","cli","ones","quite","though","certainly","type","low","optional","smaller","15-30","invalid","tags","own","handling","cost","supports","build","files","description","fastest","configure","failing","elimination","comments","use","operators","anything","detailed","top-level","fix","behaviour","option","and","whitespace","catch","from","each","yield","configuration","css","function","expect","config","only","time","input","source","large","helps","worth","find","future","disabled","content","adds","optimize","alternatively","production-grade","constants","absolutely","either","code","respects","most","fun","designed","loads","duplicate","minification","closing","bug","configured","extensibility","expressions","obviously","section","well","dead","process","prefixes","such","during","high-reward","documentation","typical","want","receive","completely","affects","besides","locally","are","comprehensive","additionally","overrides","etc","complete","after","negligible","impact","decrease","bandwidth","page","functions","speed","fails","provided","extensible","projects","parsing","production","second","performance","errors","where","ndg","rely","whitespace-sensitive","reduction","re-enable","capabilities","new","javascript","feature","may","resort","but","uses","that","wish","avoid","reports","example","20-40","last","given","file","eliminates","default","processor","not","planned","folds","increase","removes","tiny","color","cases","fast","spec-compliant","pulled","disable","its","almost","debug","crazy","with","your","minimal","postprocessing","options","using","little","crate","boasts","generated","matters","battle-tested","generation","sites","elements","via","following","penalty","faster","deploying","unused","overhead","need","100","low-risk","however","for","stop","implementations","processing"],"title_tokens":["postprocessing"],"anchors":[{"text":"Postprocessing","id":"postprocessing","level":1,"tokens":["postprocessing"]},{"text":"Configuration","id":"configuration","level":2,"tokens":["configuration"]},{"text":"Options","id":"options","level":2,"tokens":["options"]},{"text":"Top-Level Options","id":"top-level-options","level":3,"tokens":["options","top-level"]},{"text":"HTML Options","id":"html-options","level":3,"tokens":["options","html"]},{"text":"Minification","id":"minification","level":2,"tokens":["minification"]},{"text":"HTML Minification","id":"html-minification","level":3,"tokens":["minification","html"]},{"text":"CSS Minification","id":"css-minification","level":3,"tokens":["minification","css"]},{"text":"JavaScript Minification","id":"javascript-minification","level":3,"tokens":["minification","javascript"]},{"text":"Complete Example","id":"complete-example","level":3,"tokens":["example","complete"]},{"text":"Performance Impact","id":"performance-impact","level":3,"tokens":["impact","performance"]},{"text":"Error Handling","id":"error-handling","level":3,"tokens":["error","handling"]},{"text":"Extensibility","id":"extensibility","level":2,"tokens":["extensibility"]}]},{"id":"3","title":"Templating Guide","content":"Templating Guide NDG supports a flexible templating system powered by Tera and backed by our own templating logic. Using this system, you may customize the appearance and structure of your generated documentation while avoiding what could be referred to as a \"vendor lock-in\". Template Types There are several \"special\" templates that is expected during documentation generation. NDG bundles its own templates that will be used by default, but you may override them as you wish to make your documentation site truly unique. Core Templates - Main template for documentation pages - Template for NixOS module options page - Template for the search page - Navigation bar template (shared across all pages) - Footer template (shared across all pages) - Table of contents template for options page Assets - Default stylesheet - Scripts loaded for interactivity - Secondary script used for the search functionality Using Custom Templates As mentioned before, you may Template Directory Using the template directory is the recommended way of overriding default templates of NDG. In this method, you must use a template directory containing all your custom templates: Or in your : [!TIP] The command can be used to create a directory with the default templates, meant to be overridden by the user. ndg will prioritize templates provided by the user wherever provided. Missing page templates will cause ndg to use the default template for that page variant. E.g., providing a template directory with just would use the provided by the user, but the built-in templates for rest of the templatable components. Individual Template File A dirty legacy method of quickly overriding exists as . This allows providing a quick override for only the default template , which may be useful if you only want to override styles for arbitrary generated pages, and not special pages or components such as the navbar. This will use as the default.html template. Per-File Templates You can create file-specific templates that will be used instead of for matching markdown files. Example: -> will use template if it exists, otherwise falls back to -> will use template if it exists, otherwise falls back to This is useful when you want different layouts for different sections of your documentation. It can also be used for, e.g., to generate your own 404 page with Markdown. Template Components Navbar Template ( ) Customize the navigation bar that appears in the header of all pages. Available Variables: - HTML attributes for options link styling (e.g., ) - Boolean indicating if search is enabled - Relative path to options page - Relative path to search page Example Footer Template ( ) Customize the footer that appears at the bottom of all pages. Available Variables: - Footer text from configuration Example Exporting Default Templates To export all default templates for customization: This will create a directory with all default templates that you can then modify. Use to overwrite existing files: Template Variables Common Variables (Available in all templates) - Page title - Site title from configuration - Footer text from configuration - Rendered markdown content - Table of contents HTML - Document navigation HTML - Rendered navbar HTML - Rendered footer HTML - Options link styling attributes - Boolean for search feature - Custom scripts HTML - Meta tags HTML - OpenGraph tags HTML Asset Paths - Path to stylesheet - Path to main JavaScript file - Path to search JavaScript file - Path to index page - Path to options page - Path to search page Options Page Specific - Page heading - Rendered options HTML Template Syntax Templates use the Tera templating engine, which is similar to Jinja2/Django templates. Below are some examples provided for your convenience. Please refer to the Tera's documentation for more details. Everything supported by Tera is supported in NDG's templated documents. Variables Use the filter to render HTML without escaping: Conditionals Loops Example: Custom Theme Here's an example of creating a custom theme: Export the default templates: Customize the templates in Modify to add custom links: Update : Create a custom template for your homepage ( ): Now you may use the custom theme freely using the option. Configuration Example In : Best Practices For a clean(er) experience, we recommend that you: Start with defaults : Export the default templates and modify them rather than starting from scratch Keep it modular : Use the navbar and footer templates to keep common elements consistent Preserve CSS classes : Keep the default CSS classes to maintain functionality (sidebar toggle, search, etc.) The nature of a mixed-approach that NDG supports may sometimes yield results that can be best described as annoying. Though it is perfectly possible to have a good design and keep your sanity. Troubleshooting Template not found Make sure your template directory contains the required templates or that fallback templates are available. Variables not rendering Check variable names match the documentation Use for HTML content Check for typos in variable names Styling issues Ensure your custom CSS doesn't conflict with default styles Check that CSS classes used by JavaScript features are preserved Test responsive design on mobile devices Per-file template not working Ensure the template filename matches the markdown filename (e.g., for ) Check that the template is in the configured template directory Verify the template has valid Tera syntax","path":"TEMPLATING.html","tokens":["ensure","files","have","rather","ndg","nature","check","creating","clean","available","there","would","navbar","quick","some","table","responsive","individual","truly","templating","meta","that","variables","html","title","per-file","several","just","attributes","javascript","has","examples","homepage","bottom","please","cause","prioritize","now","valid","recommended","options","below","your","components","system","back","when","option","syntax","exporting","user","directory","best","header","containing","start","documentation","starting","own","vendor","sanity","supported","them","sometimes","custom","overwrite","this","document","engine","convenience","sure","customize","core","powered","mobile","its","working","scratch","referred","special","links","preserve","used","our","tera","contents","instead","404","filename","supports","may","logic","the","filter","practices","good","will","paths","export","interactivity","quickly","are","indicating","customization","boolean","heading","during","generation","way","built-in","templatable","and","lock-in","overridden","recommend","preserved","loaded","must","use","layouts","appears","everything","asset","templates","scripts","jinja2","theme","yield","match","typos","doesn","refer","also","loops","devices","matching","generate","link","what","without","test","script","useful","text","though","only","conditionals","falls","file-specific","specific","css","types","mentioned","features","unique","shared","sidebar","bar","configured","escaping","for","footer","main","guide","method","pages","sections","contains","than","tags","possible","backed","exists","from","here","overriding","configuration","details","described","then","keep","render","names","elements","markdown","wherever","while","tip","bundles","results","similar","verify","flexible","toggle","example","you","can","content","found","required","which","but","command","secondary","styles","documents","nixos","such","design","dirty","module","index","modular","styling","path","file","search","override","provided","assets","conflict","structure","navigation","arbitrary","opengraph","django","variant","update","meant","providing","fallback","appearance","existing","allows","maintain","create","want","not","could","before","freely","experience","matches","feature","default","otherwise","different","make","modify","wish","functionality","missing","across","annoying","common","classes","site","avoiding","page","all","rendering","stylesheet","relative","variable","rest","issues","using","template","rendered","with","generated","perfectly","troubleshooting","legacy","expected","more","enabled","defaults","etc","templated","add","mixed-approach","consistent"],"title_tokens":["templating","guide"],"anchors":[{"text":"Templating Guide","id":"templating-guide","level":1,"tokens":["guide","templating"]},{"text":"Template Types","id":"template-types","level":2,"tokens":["template","types"]},{"text":"Core Templates","id":"core-templates","level":3,"tokens":["templates","core"]},{"text":"Assets","id":"assets","level":3,"tokens":["assets"]},{"text":"Using Custom Templates","id":"using-custom-templates","level":2,"tokens":["templates","using","custom"]},{"text":"Template Directory","id":"template-directory","level":3,"tokens":["template","directory"]},{"text":"Individual Template File","id":"individual-template-file","level":3,"tokens":["file","template","individual"]},{"text":"Per-File Templates","id":"per-file-templates","level":2,"tokens":["templates","per-file"]},{"text":"Template Components","id":"template-components","level":2,"tokens":["components","template"]},{"text":"Navbar Template (navbar.html)","id":"navbar-template--navbar-html","level":3,"tokens":["navbar","template","html"]},{"text":"Footer Template (footer.html)","id":"footer-template--footer-html","level":3,"tokens":["footer","template","html"]},{"text":"Exporting Default Templates","id":"exporting-default-templates","level":2,"tokens":["default","templates","exporting"]},{"text":"Template Variables","id":"template-variables","level":2,"tokens":["variables","template"]},{"text":"Common Variables (Available in all templates)","id":"common-variables--available-in-all-templates","level":3,"tokens":["all","variables","available","templates","common"]},{"text":"Asset Paths","id":"asset-paths","level":3,"tokens":["paths","asset"]},{"text":"Options Page Specific","id":"options-page-specific","level":3,"tokens":["options","page","specific"]},{"text":"Template Syntax","id":"template-syntax","level":2,"tokens":["template","syntax"]},{"text":"Variables","id":"variables","level":3,"tokens":["variables"]},{"text":"Conditionals","id":"conditionals","level":3,"tokens":["conditionals"]},{"text":"Loops","id":"loops","level":3,"tokens":["loops"]},{"text":"Example: Custom Theme","id":"example--custom-theme","level":2,"tokens":["custom","example","theme"]},{"text":"Configuration Example","id":"configuration-example","level":2,"tokens":["example","configuration"]},{"text":"Best Practices","id":"best-practices","level":2,"tokens":["practices","best"]},{"text":"Troubleshooting","id":"troubleshooting","level":2,"tokens":["troubleshooting"]},{"text":"Template not found","id":"template-not-found","level":3,"tokens":["not","found","template"]},{"text":"Variables not rendering","id":"variables-not-rendering","level":3,"tokens":["rendering","variables","not"]},{"text":"Styling issues","id":"styling-issues","level":3,"tokens":["issues","styling"]},{"text":"Per-file template not working","id":"per-file-template-not-working","level":3,"tokens":["per-file","template","not","working"]}]},{"id":"4","title":"Sidebar Configuration","content":"Sidebar Configuration NDG supports flexible sidebar customization through the configuration section, allowing you to control the appearance, ordering, and content of navigation items in your generated documentation. Configuration Structure Sidebar behavior is configured through the section in your file or via the equivalent JSON structure. Top-Level Options Controls whether sidebar items are numbered sequentially. Type : Boolean Default : When enabled, items display as \"1. Title\", \"2. Title\", etc. Special files ( , ) are excluded from numbering by default unless is enabled. Example: Result: Controls whether special files ( , ) are included in the numbering sequence. Only has effect when . Type : Boolean Default : Example with : Example with : Determines how sidebar items are sorted. Type : String Default : Options : - Sort items alphabetically by title - Preserve filesystem order - Sort by the field from pattern matches Pattern Matching The array contains pattern-based rules for customizing specific sidebar items. Rules are evaluated in order, and the first matching rule wins . Match Rule Structure Each entry supports: Matching Fields Field Type Description String Exact path match (shorthand for ) String Exact path match (e.g., ) String Regex pattern for path matching (e.g., ) String Exact title match (shorthand for ) String Exact title match (e.g., ) String Regex pattern for title matching (e.g., ) Action Fields Field Type Description String Custom title to display in the sidebar Integer Custom position (used when ) Matching Logic All specified matching conditions must be satisfied (AND logic) If both and are specified, both must match If both and are specified for the same field, both must match Only the first matching rule is applied to each item Shorthand Syntax For exact matches, shorthand syntax is available: Examples Basic Numbering Custom Ordering Custom Titles Regex Pattern Matching Combined Conditions This rule matches files that are both in the directory AND have the exact title \"API Functions\". Options Sidebar The section provides specialized configuration for NixOS module options, controlling how options appear in the options table of contents. Structure Options Fields Controls the grouping depth for option categories. Type : Integer Default : A depth of 2 groups options by their first two components (e.g., groups all options). Example with : Example with : Determines how options are sorted in the table of contents. Type : String Default : Options : , , Option Pattern Matching Each entry supports: Matching Fields Field Type Description String Exact option name match (shorthand for ) String Exact option name (e.g., ) String Regex pattern for option name (e.g., ) Action Fields Field Type Description String Custom display name for the option or category Integer Custom grouping depth for this specific option Integer Custom position (used when ) Boolean Hide this option from the TOC (default: ) Shorthand Syntax Options Examples Hiding Internal Options Custom Display Names Custom Ordering Per-Option Depth Override Result: Combined Example JSON Configuration The sidebar configuration can be specified in JSON format with either shorthand or nested syntax: Shorthand syntax: Nested syntax (required for regex): Options configuration:","path":"SIDEBAR.html","tokens":["configured","satisfied","sequence","name","configuration","the","generated","nixos","flexible","either","section","boolean","special","regex","both","toc","items","behavior","pattern","controls","matching","included","sidebar","first","same","json","file","example","array","logic","available","functions","specified","hide","internal","etc","default","exact","enabled","with","for","specific","components","per-option","custom","via","action","preserve","numbering","path","through","content","effect","examples","basic","two","how","fields","ordering","title","appearance","must","override","all","appear","specialized","categories","entry","table","conditions","documentation","position","ndg","only","hiding","contains","names","result","format","top-level","their","display","you","unless","alphabetically","each","applied","navigation","api","when","determines","excluded","files","matches","have","your","sequentially","controlling","options","evaluated","directory","rules","are","option","groups","customizing","order","can","field","filesystem","provides","module","that","and","has","pattern-based","required","supports","item","allowing","used","titles","customization","control","combined","rule","grouping","category","match","description","sorted","shorthand","integer","syntax","contents","nested","string","depth","equivalent","structure","this","sort","wins","from","type","whether","numbered"],"title_tokens":["configuration","sidebar"],"anchors":[{"text":"Sidebar Configuration","id":"sidebar-configuration","level":1,"tokens":["configuration","sidebar"]},{"text":"Configuration Structure","id":"configuration-structure","level":2,"tokens":["structure","configuration"]},{"text":"Top-Level Options","id":"top-level-options","level":2,"tokens":["options","top-level"]},{"text":"numbered","id":"numbered","level":3,"tokens":["numbered"]},{"text":"number_special_files","id":"number_special_files","level":3,"tokens":["number_special_files"]},{"text":"ordering","id":"ordering","level":3,"tokens":["ordering"]},{"text":"Pattern Matching","id":"pattern-matching","level":2,"tokens":["pattern","matching"]},{"text":"Match Rule Structure","id":"match-rule-structure","level":3,"tokens":["rule","match","structure"]},{"text":"Matching Logic","id":"matching-logic","level":3,"tokens":["matching","logic"]},{"text":"Shorthand Syntax","id":"shorthand-syntax","level":3,"tokens":["syntax","shorthand"]},{"text":"Examples","id":"examples","level":2,"tokens":["examples"]},{"text":"Basic Numbering","id":"basic-numbering","level":3,"tokens":["basic","numbering"]},{"text":"Custom Ordering","id":"custom-ordering","level":3,"tokens":["custom","ordering"]},{"text":"Custom Titles","id":"custom-titles","level":3,"tokens":["titles","custom"]},{"text":"Regex Pattern Matching","id":"regex-pattern-matching","level":3,"tokens":["regex","pattern","matching"]},{"text":"Combined Conditions","id":"combined-conditions","level":3,"tokens":["conditions","combined"]},{"text":"Options Sidebar","id":"options-sidebar","level":2,"tokens":["sidebar","options"]},{"text":"Structure","id":"structure","level":3,"tokens":["structure"]},{"text":"Options Fields","id":"options-fields","level":3,"tokens":["options","fields"]},{"text":"Option Pattern Matching","id":"option-pattern-matching","level":3,"tokens":["matching","option","pattern"]},{"text":"Shorthand Syntax","id":"shorthand-syntax","level":3,"tokens":["shorthand","syntax"]},{"text":"Options Examples","id":"options-examples","level":3,"tokens":["options","examples"]},{"text":"JSON Configuration","id":"json-configuration","level":2,"tokens":["configuration","json"]}]},{"id":"5","title":"index","content":"What is it? NDG is a fast, customizable and convenient utility for generating HTML documents and manpages for your Nix related projects from Markdown inputs, and Nix module options. It can be considered a more opinionated and more specialized alternative to MdBook, choosing to focus on Nix-related projects. While this project is designed for Hjem in mind, it is perfectly possible to use NDG outside of Nix contexts. All Nix-specific features, such as module options page and Nixpkgs-flavored CommonMark parsing are optional and can be controlled via various knobs. Features We would like for NDG to be fast, but also flexible and powerful. It boasts several features such as Markdown to HTML and Manpage conversion with support for Nixpkgs-flavored CommonMark features . Useful Markdown Companions Automatic table of contents generation from document headings Title Anchors are automatically generated for headings GFM extensions powered by ndg-commonmark Search functionality to quickly find content across documents Nix module options support to generate documentation from Flexible options sidebar customization to control visibility, naming, ordering, and depth of option categories Fully customizable templates to match your project's style fully Incredibly fast documentation generation for all scenarios Multi-threading support for fast generation of large documentation sets Usage The primary interface of NDG is the CLI utility. There are several subcommands to handle different documentation tasks. You can review and commands' help texts to get more insight. Quickstart The easiest and fastest way to get started with NDG is using the subcommand to generate a configuration file, and tweak it per your needs. Upon running , you will receive a configuration file in one of JSON or TOML formats depending on the format specified, with all available options and their default values as well as explanatory comments. You can then edit this file to customize your documentation generation process. [!TIP] The generated configuration includes detailed comments for each option, making it easy to understand what each setting does without needing to refer to the documentation. Once you have a configuration file, NDG will automatically detect it when ran in the same directory. Though if you want to move the configuration file to a nonstandard location, you may specify a path to the configuration file using the option. Upon running , you will receive a configuration file in one of JSON or TOML formats depending on the format specified, with all available options and their default values as well as explanatory comments. You can then edit this file to customize your documentation generation process. [!TIP] The generated configuration includes detailed comments for each option, making it easy to understand what each setting does without needing to refer to the documentation. Once you have a configuration file, NDG will automatically detect it when ran in the same directory. Though if you want to move the configuration file to a nonstandard location, you may specify a path to the configuration file using the option. Generating Your First Documents To generate your documents, NDG requires one of two things: Markdown Sources or . Alternatively, for more comprehensive documents, you can provide both. The latter will be used for an with your module options in the case Markdown sources are provided. The Markdown sources are expected in an \"inputs\" directory, in which you can dump your Markdown files with ndg-flavored Commonmark, and they will be converted to HTML following the same structure. For example: Assuming your input directory ( ) is , you will receive the following output: You will notice the and documents representing and from the inputs directory. The assets directory and the document are special outputs generated by NDG. We'll talk about them later in the templates section . This is the operating principle of NDG: you give it some Markdown inputs, and you receive some HTML documents. It is all structured, so you can worry less about site design and more about writing documentation. You do write documentation, right? We'll continue talking about HTML generation in the relevant section . For now, let's take a look at how to configure NDG to fit your needs. Detailed Usage CLI Flags and Configuration Options The CLI flags are the alternative method of configuring NDG, and can be used in conjunction with the configuration file. While used together, the CLI flags can be used to provide ad-hoc overrides of specific NDG behaviour provided by the configuration file, or the default configuration, such as page indexing for search and code highlighting. Two example flags accepted by are: : Enables search functionality (disabled by default if omitted). : Enables syntax highlighting for code blocks (disabled by default if omitted). Example usage: In this example we're telling NDG to look for Markdown sources in the directory using the flag and to dump the result in using the flag. Additionally, the and flags ensure that we use the correct title in the site's navbar, and to generate search data. Those flags will override the relevant values in the ndg configuration, e.g., if provided. If you do not need a full configuration, you may simply use the flags above to generate a complete documentation site without ever needing to create your configuration. Do note, however, that some configuration options are ONLY available in , and will not be available to override from the CLI. Configuration Files NDG accepts two distinct configuration formats, TOML and JSON, to allow setting your options persistently. Options like can be set in the config file, but CLI flags will override them if provided . TOML is the \"blessed\" format for NDG, though JSON is fully supported thanks to Serde. The default format for generated configuration files is TOML. Example : Interactions Between CLI and Config [!NOTE] CLI flags always take precedence over config file settings. For instance, if your config file has , but you run , search will be enabled. If neither CLI nor config specifies an option, ndg uses sensible defaults (e.g., defaults to if omitted from both; CLI flags override config when present). For a full list of CLI options, see the help output with . Configuration Reference Below is a comprehensive list of configuration options available in : Basic Options: - Path to directory containing Markdown files - Output directory for generated documentation (default: ) - Documentation title (default: ) - Footer text (default: ) - Number of threads for parallel processing (default: auto-detected) Feature Toggles: - Enable search functionality (default: ) - Maximum heading level to index (default: ) - Enable syntax highlighting (default: ) - Generate heading anchors (default: ) Advanced Options: - Path to custom template file - Directory containing custom templates - Array of custom stylesheet paths - Array of custom JavaScript file paths - Directory containing additional assets to copy - Path to for NixOS module documentation - Depth of option categories in TOC (default: ) - Path to manpage URL mappings JSON file - Git revision for source file links (default: ) - How to handle tabs in code blocks: , , or (default: ) Metadata Options: - Table of OpenGraph meta tags (e.g., ) - Table of additional HTML meta tags (e.g., ) Example configuration: Advanced Configuration Details Parallel Processing ( ): The option controls how many threads NDG uses for processing files. By default, NDG auto-detects the number of CPU cores. For large documentation sets, this significantly speeds up generation: Tab Handling ( ): Controls how hard tabs in code blocks are handled: - Leave tabs as-is (default) - Log warnings when tabs are detected - Convert tabs to spaces (4 spaces per tab) This is useful for ensuring consistent code block rendering across browsers. Manpage URL Mappings ( ): Provides a JSON file mapping manpage references to URLs. This allows NDG to automatically link manpage citations in your documentation: Custom Assets ( , , ): - Directory to copy wholesale into the output (images, fonts, etc.) - Additional CSS files to include (can specify multiple) - Additional JavaScript files to include (can specify multiple) Example: SEO and Social Media ( , ): These options inject metadata into the HTML for better SEO and social media sharing: Generating HTML Documents As of , NDG features a more compartmentalized architechture with a focus on distinguishing between output formats more carefully. Prior to version 2.0.0, HTML was the \"default\" output format, and the only \"blessed\" one. In more recent versions of NDG, HTML support is fully mature and is available under the subcommand. The subcommand includes the following options: As covered in the previous chapters, you must NDG an input directory containing your markdown files ( ), an output directory ( ) to put the created files, and a title ( ) for basic functionality. Alternatively, those can all be read from a config file, passed to ndg through the option. For example: For this example, contains markdown files that you would like to convert, and is the result directory after the conversion. [!INFO] Optionally you may pass an to also render an page for a listing of your module options. See the NixOS Options section below for more details. Generating Manpages NDG allows generating manual pages for your project using your . Due to the shortcomings of Troff, manpage generation is not as robust or mature as HTML. Nevertheless, the subcommand allows generating a manpage from your options: [!NOTE] For manpages, you must provide an using or . Since we do not convert arbitrary pages in the Manpages mode, this is necessary to generate the main page containing module options. Customization NDG is an opinionated CLI utility due to the reasons that warranted its existence, but it still aims to support various colorful customization options to tailor the output to your needs, regardless of how immodest they may be. The HTML output design is handcrafted for Hjem by default as a small internal template, and while this is suitable for a majority of use cases, it may not be for you. If you would like to go above and beyond, or simply are not very keen on those templates, you are encouraged to export the default templates and iterate on them as you wish. NDG provides an subcommand that exports the default templates into a specified directory of your choosing. You may modify those templates as you wish, and use them in document generation by passing the flag to . You can also provide a single template file using the option: [!NOTE] The flag will ONLY override the default template, which is used in the generation of the converted Markdown pages. To modify search and options pages, you may want to export the templates in full and modify them per your needs. This is an escape hatch for simple tweaks to converted pages. When using a template directory, ndg will look for the following files: - Main template for documentation pages - Template for options page - Template for search page - Template for options table of contents - Default stylesheet - Search functionality JavaScript For any missing files, ndg will fall back to its internal templates. Custom templates use the Tera templating engine, so your templates should use Tera syntax. Below are the variables that ndg will attempt to replace. - Document title - Main content area (unescaped HTML) - Table of contents (unescaped HTML) - Navigation links to other documents (unescaped HTML) - Conditional display for options page link - Footer text specified via the --footer option - Boolean indicating whether search functionality is enabled - Path to the stylesheet (automatically adjusted for subdirectories) - Path to the main JavaScript file (automatically adjusted for subdirectories) - Path to the search JavaScript file (automatically adjusted for subdirectories) - Path to the index page (automatically adjusted for subdirectories) - Path to the options page (automatically adjusted for subdirectories) - Path to the search page (automatically adjusted for subdirectories) - Custom script tags (unescaped HTML, automatically adjusted for subdirectories) Each template can use these variables as needed. For example, in the template: Once exported, you can customize any of these files and use them with the option: This workflow is designed to aid developers avoid rebuilds, and to make sure users always start with the latest default templates and can easily update them when ndg is upgraded. Though, ndg will fall back to internal templates when none are provided. See the templating documentation for details about the templating. If your use-case is not supported, feel free to request a feature! Sidebar Customization NDG allows you to customize the sidebar navigation through flexible configuration options. You can control item ordering, add numbering, and customize titles using pattern-based matching: This enables features like: Sequential numbering of sidebar items Custom ordering (alphabetical, custom position-based, or filesystem) Pattern-based title customization using exact or regex matching Flexible positioning for specific documentation items For documentation generated from Nix module options, you can also customize the options sidebar to control visibility, naming, ordering, and depth of option categories. This is particularly useful for large module systems like NixOS or Home Manager configurations. See the sidebar configuration guide for complete documentation including examples, use cases, and best practices. Template Customization Made Easy Custom Stylesheet NDG also bundles its own stylesheet as a part of the default templates. This is meant to be a simple starting point, but you may easily override it with your own stylesheets if you are not satisfied with the defaults. The flag allows overriding the default CSS template with your own. [!WARNING] While overriding the CSS, it is strongly recommended that you do not partially override the files. This mechanism is intended for quick and dirty edits rather than full replacements, because the default HTML templates depend on CSS classes in the default stylesheet. If you would like to start fresh, you should consider exporting the default template, and overriding it in full. NDG is able to compile SCSS as well, should you choose to pass it a file with the extension. The stylesheet will be compiled in runtime, and placed as a file in the output directory. NixOS Options One of the many purposes of NDG is to document options provided by the Nix module system. This behaviour is similar to used in the Nixpkgs manual, and is fully backwards compatible in terms of the file format expected by the utility. To include a page listing NixOS options, provide a path to your file: While there is no clear standard, the is expected to be in the same \"standard\" format as the utility used by NixOS. In a traditional setup, you can generate this file using by providing it with evaluated modules. If you are using the package instead of the raw CLI, module evaluation is done for you automatically. [!TIP] An example from nvf , created via . Search Configuration Your documentation may get convoluted as it grows more comprehensive (because you write such good docs!) so NDG includes the option to generate A search page with full indexing A search widget with limited functionality to search across your pages and option references. This used to be enabled by default prior to version v2.4 but it now defaults to false to avoid invasive behaviour and keep builds lightweight. You may re-enable the search page generating by passing the flag to While the search is disabled, all search-related functionality will be skipped during runtime. Using & Integrating with Nix Besides the CLI, NDG provides a simple but handy interface to interact directly with your Nix modules. While we recommend writing your own package to work with NDG, a very basic builder is provided under the NDG repository to wrap and configure NDG for you. This is done by the package, available from our flake outputs. Using NDG with Nix Installing NDG with Nix is the recommended way of generating documentation for your Nix projects. There are several ways to use NDG with Nix: Installing from the Flake The simplest and fastest way of using NDG is getting it directly from our Nix flake. A package is exported, and it can be consumed in one of two ways: Use NDG using the Nix3 CLI: Add NDG to your flake inputs, and use its packages in your project We generally recommend fetching NDG using Nixpkgs fetchers or npins . Due to the inefficiency of Nix Flakes, using NDG as a flake input causes it to be fetched each time the input is updated even if NDG is not actually in use. Using Nixpkgs fetchers and npins allows benefiting from laziness. See how Hjem does it for an example of utilizing Npins for this task. Using ndg-builder We provide a function, meant as an escape hatch when you are not interested in customizing NDG yourself. This abstracts away some of NDG's complexities at the cost of some performance overhead, and a more limited interface. In the case your needs are modest, you may be interested in using this option. Manual Approach Using If you need more control, you can use directly: This approach correctly handles the generation of options documentation using and properly passes the result to NDG. Pro Tips & Best Practices Performance Optimization Use multi-threading for large documentation sets: Selectively disable features that you don't need: Styling Tips Use SCSS for complex stylesheets : ndg automatically compiles SCSS files, allowing you to use variables, nesting, and mixins. Start with exported templates : Always begin customization by exporting the default templates: Customize specific pages : When using a template directory, you can have different templates for different page types: Content Organization Use consistent header levels : ndg generates the table of contents based on heading levels. Start with ( ) for the title, then use ( ) for major sections. Structure your options with depth in mind : The parameter controls how the options TOC is generated. Organize your options to create a logical hierarchy. Create an index.md file : Place an file in your input directory to serve as the landing page. Special Files NDG treats certain files specially to maintain clear navigation hierarchy and ensure proper site structure. These files have behaviors that differ from regular documentation pages. [!TIP] What are \"Special Files\" ? The following files are considered \"special\" (case-insensitive): In the case neither special file, nor an is provided; NDG will create a fallback page that links available documents in the project. You are encouraged to provide a README or an index page to avoid serving your users a mostly empty fallback page. Special file behaviors: Landing page priority ( only): Preferred source for the site's landing page If no exists, NDG falls back to using or creates a fallback index listing all documents Sidebar rendering (both and ): Always appear first in the sidebar navigation Excluded from numbering by default when in sidebar config Can be included in numbering by setting Can have custom titles via sidebar pattern matching [!NOTE] Why this design? Special files represent conceptual entry points rather than sequential content: They serve as landing pages or overviews outside the normal documentation flow Numbering them (e.g., \"1. Home\", \"2. Getting Started\") creates awkward visual hierarchy Keeping them unnumbered and first emphasizes their role as anchors With sidebar numbering enabled ( , the default): Renders as: With : GitHub Integration Link to source with revision : Use the option to specify a GitHub revision for source links: Configuration Management Create per-project config files : For projects with complex documentation, create a dedicated file: Content Enhancement Use admonitions for important content : Create memorable custom ID anchors for important sections: Building from Source NDG is a tool written in Rust, and a Nix package is available for easily building and consuming it. In the case you're planning to hack on NDG, is provided for Direnv integration and you may use inside a dev shell, e.g., by using . License This project is made available under Mozilla Public License (MPL) version 2.0. See LICENSE for more details on the exact conditions. An online copy is provided here . This is a best-effort. Regular CommonMark is fully supported, but Nixpkgs additions may sometimes break due to the lack of a clear specification. Please open an issue if this is the case for you.","path":"index.html","tokens":["developers","nesting","first","this","now","output","talk","syntax","thanks","javascript","proper","process","engine","pattern-based","causes","controls","satisfied","consuming","leave","custom","source","later","edits","distinct","header","automatically","boolean","similar","maintain","aid","standard","alternative","module","time","instead","while","containing","specially","right","tabs","utilizing","ndg","html","yourself","fastest","speeds","start","basic","even","modest","tags","simplest","very","url","neither","here","dev","integration","grows","awkward","tab","represent","generation","comprehensive","possible","via","listing","readme","relevant","sure","dump","subdirectories","detailed","insight","useful","escape","overriding","with","iterate","tera","strongly","management","mozilla","full","memorable","document","extensions","manual","there","chapters","precedence","subcommand","your","entry","mind","invasive","flake","manpages","considered","use-case","warranted","anchors","match","uses","accepted","revision","handled","can","media","default","partially","conceptual","inputs","sequential","types","prior","avoid","pro","optimization","generating","create","compiled","please","support","ever","workflow","documentation","bundles","dirty","fallback","conversion","files","see","parallel","quickly","cpu","block","directly","logical","depth","various","including","large","purposes","our","commonmark","such","fully","easy","inject","comments","scenarios","specified","these","documents","passing","may","examples","writing","convoluted","good","explanatory","than","how","limited","generally","users","images","carefully","recommended","replacements","configure","matching","actually","pattern","hack","arbitrary","case","texts","things","sets","maximum","assuming","search-related","review","complex","hard","functionality","visibility","tweak","omitted","based","choose","features","values","and","fetched","following","updated","work","compiles","links","meant","example","conditional","defaults","serve","latter","area","nix-specific","don","any","customizable","inside","take","distinguishing","setting","exports","those","immodest","home","hjem","additionally","modules","re-enable","edit","ways","control","them","package","overrides","inefficiency","naming","converted","feel","keep","admonitions","log","simple","like","titles","rather","interested","need","note","besides","properly","outside","sometimes","get","accepts","rendering","sections","running","unescaped","best-effort","providing","indicating","nix3","creates","upgraded","help","gfm","look","contexts","config","after","tasks","exported","controlled","title","have","replace","encouraged","numbering","filesystem","systems","evaluated","correctly","sidebar","opinionated","requires","instance","nixos","copy","installing","highlighting","using","principle","generated","page","detected","getting","projects","request","meta","nix-related","main","levels","however","specialized","which","seo","expected","one","would","optional","extension","add","styling","lightweight","certain","tool","public","does","existence","nixpkgs-flavored","subcommands","location","used","footer","exact","empty","when","will","per","receive","robust","structured","talking","once","assets","enable","include","give","you","started","formats","stylesheet","focus","under","version","single","let","tweaks","part","widget","content","enhancement","written","break","site","data","wish","aims","result","consistent","conjunction","adjusted","depend","treats","templates","lack","docs","selectively","template","simply","landing","beyond","builder","role","toc","text","multiple","notice","nor","item","several","reasons","browsers","generate","ndg-commonmark","handling","compartmentalized","compatible","able","during","fit","raw","provides","recent","mixins","settings","behaviors","keeping","specification","serde","the","into","mode","system","terms","starting","citations","should","from","online","includes","continue","boasts","navbar","navigation","parsing","option","auto-detected","made","indexing","set","as-is","info","normal","method","about","ad-hoc","specify","tips","quickstart","troff","significantly","preferred","consider","what","allowing","project","spaces","incredibly","tailor","needed","correct","specifies","point","done","points","find","both","git","understand","necessary","script","exporting","classes","rebuilds","serving","more","mdbook","position-based","operating","ndg-flavored","allows","positioning","ensure","primary","some","behaviour","worry","cases","regex","still","passes","exists","flags","since","alphabetical","generates","directory","make","per-project","customize","list","number","why","versions","blocks","whether","move","attempt","integrating","parameter","visual","design","threads","easiest","above","optionally","perfectly","detect","suitable","modify","automatic","easily","npins","ndg-builder","multi-threading","nonstandard","alternatively","false","variables","particularly","handcrafted","handy","handles","way","ran","organize","export","task","runtime","included","cli","file","structure","interactions","complete","feature","due","clear","builds","renders","own","provided","back","guide","warnings","only","utility","use","well","fast","opengraph","interact","warning","colorful","ensuring","provide","each","because","differ","blessed","nevertheless","headings","fonts","better","open","without","practices","falls","different","passed","traditional","overviews","convenient","for","companions","handle","customization","reference","related","regular","shell","regardless","display","together","additions","update","nixpkgs","array","they","free","special","mature","fetchers","commands","telling","recommend","overhead","toml","flexible","sensible","upon","though","additional","enables","etc","paths","majority","begin","section","over","hatch","appear","sharing","powerful","flow","sources","important","other","best","enabled","present","categories","needs","usage","their","pass","nvf","dedicated","put","its","quick","powered","architechture","created","read","between","internal","mechanism","priority","level","persistently","style","metadata","across","must","fetching","available","options","references","items","planning","details","advanced","write","manpage","major","knobs","missing","mpl","are","format","social","latest","consumed","github","direnv","designed","function","always","keen","templating","abstracts","representing","mappings","table","link","all","also","wholesale","performance","heading","conditions","input","less","tip","many","processing","pages","specific","cost","supported","index","setup","interface","needing","choosing","then","outputs","that","cores","intended","wrap","unnumbered","license","manager","search","laziness","auto-detects","path","contents","code","two","override","want","backwards","complexities","hierarchy","mostly","contains","ordering","fresh","below","emphasizes","case-insensitive","compile","shortcomings","render","none","toggles","away","disable","allow","customizing","making","convert","mapping","flakes","configurations","configuration","run","issue","through","was","has","but","repository","building","previous","small","nix","stylesheets","refer","evaluation","excluded","json","same","not","css","rust","approach","depending","organization","markdown","placed","scss","configuring","benefiting","flag","place","packages","skipped","disabled","covered","urls","fall"],"title_tokens":["index"],"anchors":[{"text":"What is it?","id":"what-is-it","level":2,"tokens":["what"]},{"text":"Features","id":"features","level":3,"tokens":["features"]},{"text":"Usage","id":"usage","level":2,"tokens":["usage"]},{"text":"Quickstart","id":"quickstart","level":3,"tokens":["quickstart"]},{"text":"Generating Your First Documents","id":"generating-your-first-documents","level":3,"tokens":["your","generating","documents","first"]},{"text":"Detailed Usage","id":"detailed-usage","level":2,"tokens":["detailed","usage"]},{"text":"CLI Flags and Configuration Options","id":"cli-flags-and-configuration-options","level":3,"tokens":["flags","options","configuration","and","cli"]},{"text":"Generating HTML Documents","id":"generating-html-documents","level":3,"tokens":["generating","html","documents"]},{"text":"Generating Manpages","id":"generating-manpages","level":3,"tokens":["manpages","generating"]},{"text":"Customization","id":"customization","level":2,"tokens":["customization"]},{"text":"Sidebar Customization","id":"sidebar-customization","level":3,"tokens":["sidebar","customization"]},{"text":"Template Customization Made Easy","id":"template-customization-made-easy","level":3,"tokens":["template","easy","customization","made"]},{"text":"Using & Integrating with Nix","id":"using---integrating-with-nix","level":2,"tokens":["using","with","integrating","nix"]},{"text":"Using NDG with Nix","id":"using-ndg-with-nix","level":3,"tokens":["with","using","nix","ndg"]},{"text":"Pro Tips & Best Practices","id":"pro-tips---best-practices","level":2,"tokens":["tips","practices","pro","best"]},{"text":"Performance Optimization","id":"performance-optimization","level":3,"tokens":["optimization","performance"]},{"text":"Styling Tips","id":"styling-tips","level":3,"tokens":["tips","styling"]},{"text":"Content Organization","id":"content-organization","level":3,"tokens":["organization","content"]},{"text":"GitHub Integration","id":"github-integration","level":3,"tokens":["github","integration"]},{"text":"Configuration Management","id":"configuration-management","level":3,"tokens":["management","configuration"]},{"text":"Content Enhancement","id":"content-enhancement","level":3,"tokens":["content","enhancement"]},{"text":"## Installation","id":"my-epic-installation","level":2,"tokens":["installation"]},{"text":"License","id":"license","level":2,"tokens":["license"]}]}]